<html>

<head>
  <meta charset="UTF-8">
  <title id='title'></title>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">

  <link rel="stylesheet" href="../app/style.css">
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="../app/monaco/min/vs/editor/editor.main.css">


  <script type='module' src='../app/init.js'> </script>

</head>

<body>

  <main>

    <nav style='display:flex; flex-direction: row;'>
      <h1 id='header' style='padding-right: 3%;'></h1>
      <div class="dropdown">
        <h2 id='current-path'></h2>
        <div id='drop-down' class="dropdown-content"></div>
      </div>
    </nav>

    <section>
      <div id='study-buttons'></div>
    </section>

    <section style='display: flex;height: 85%; width: 100%;'>
      <iframe id='output' style="width:30%;border:1px solid grey;"></iframe>
      <div id='dragbar' style='padding: 6px; cursor: col-resize; background-color: silver;'></div>
      <div id="container" style="width:70%;border:1px solid grey; flex: 1; "></div>
    </section>
    <script>
      const left = document.getElementById('output');
      const right = document.getElementById('container');
      const bar = document.getElementById('dragbar');
      const drag = (e) => {
        document.selection ? document.selection.empty() : window.getSelection().removeAllRanges();
        left.style.width = (e.pageX - bar.offsetWidth / 2) + 'px';
      }

      bar.addEventListener('mousedown', () => {
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', () => {
          document.removeEventListener('mousemove', drag);
        });
      });
    </script>

  </main>


  <script>var require = { paths: { 'vs': '../app/monaco/min/vs' } };</script>
  <script src="../app/monaco/min/vs/loader.js"></script>
  <script src="../app/monaco/min/vs/editor/editor.main.nls.js"></script>
  <script src="../app/monaco/min/vs/editor/editor.main.js"></script>

  <script>
    var editor = monaco.editor.create(document.getElementById('container'), {
      // language: 'html',
      roundedSelection: true,
      scrollBeyondLastLine: false,
      theme: "vs-dark",
      wrappingIndent: "indent",
      wordWrap: 'wordWrapColumn',
      wordWrapColumn: 100,
      automaticLayout: true,
    });

    editor.getModel().updateOptions({ tabSize: 2 });

    const outputEl = document.getElementById('output');
    editor.onKeyUp(() => {
      outputEl.src = "data:text/html;charset=utf-8," + encodeURIComponent(editor.getValue());
    });

  </script>

  <script src='../lib/beautify.js'> </script>

  <!-- <script src='../lib/chai.js'></script>
  <script src='../lib/describe-it.js'></script> -->


</body>

</html>
